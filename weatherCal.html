<!DOCTYPE html>
<html>
<head>
	<title>Local cal</title>
    <link rel="stylesheet" type="text/css" href="wheather.css">
</head>
<body>
<form name="form1">
<table>
<tr id="top"><td colspan="6"></td></tr>
<tr id="middle">
<td class="side"></td>
<td id="month"></td>
<td id="date"></td>
<td id="day"></td>
<td class="side"></td>
<td id = "we"  rowspan="2"><img id="weather"></td>
</tr>
<tr>
<td id="buttom"></td>
<td>‚ª‚Â</td>
<td>‚É‚¿</td>
<td>‚æ‚¤‚Ñ</td>
<td></td>
</tr>
</table>
<input type="text" id="out" />
<input id="checkbox1" type="checkbox" value="1">
<input id="checkbox2" type="checkbox" value="2">
</form>
</body>
<script>
var youbi_yomi =["“ú—j“ú","Œ—j“ú","‰Î—j“ú","…—j“ú","–Ø—j“ú","‹à—j“ú","“y—j“ú"];
const youbi =["‚É‚¿","‚°‚Â","‚©","‚·‚¢","‚à‚­","‚«‚ñ","‚Ç"];
const tenki_yomi={‰J:"‰J‚Å‚·B",°:"°‚ê‚Å‚·B",“Ü:"“Ü‚è‚Å‚·B",á:"á‚Å‚·B"};
const tenki_eng={‰J:"rainy",°:"sunny",“Ü:"cloudy ",á:"snowy"};
var mnt = document.getElementById("month");
var dat = document.getElementById("date");
var day = document.getElementById("day");
var wth = document.getElementById("weather");
var out = document.getElementById("out");
var ch = document.getElementById("checkbox1");
var ch2 = document.getElementById("checkbox2");


const telop = "“ÜX‰J";
var checkDate = "2020-06-22".slice(-5);
var today = new Date();
var checkToday=('0' + (today.getMonth() + 1)).slice(-2)+ '-' + ('0' + today.getDate()).slice(-2);
var kyouha = "¡“ú‚Í";
/*
window.onload = function(){
    alert(checkToday+" "+(checkToday==checkDate));    
}
*/
var voices = speechSynthesis.getVoices();
var _IMG_SIZE_="110px";
mnt.textContent = "12";//today.getMonth()+1;
dat.textContent = today.getDate();
day.textContent = youbi[today.getDay()];
wth.src = tenki_eng[editWeather()]+'.png';
wth.style.width=_IMG_SIZE_;
wth.style.width=_IMG_SIZE_;

mnt.addEventListener('click', function(){
    output(mnt.textContent+'Œ');
    mnt.style.opacity="1.0";
    ch.checked = true;
}, false);

dat.addEventListener('click', function(){
   output(dat.textContent+'“ú');
   dat.style.opacity="1.0";
   ch.checked = true;
}, false);

day.addEventListener('click', function(){
    output(youbi_yomi[today.getDay()]);
    day.style.opacity="1.0";
    ch.checked = true;
}, false);

wth.addEventListener('click', function(){
    we.style.opacity="1.0";
    output(tenki_yomi[editWeather()]);
    if(!ch2.checked)
        outputInEng(tenki_eng[editWeather()]);
    ch.checked = true;
    ch2.checked = true;
}, false);


function editWeather(){
    var result = telop.charAt(0);
    if(telop.indexOf("‰J")!=-1){ // rain 
        result = "‰J";
    }else if(telop.indexOf("á")==-1){ // snow 
        result = "á";
    }
    return result;
}

function output(str){
   var txt = document.getElementById("out");
   if(ch.checked)
        kyouha = "";
   txt.value = kyouha + str;
   const uttr = new SpeechSynthesisUtterance(txt.value);
   uttr.lang = "ja-JP";
  // ”­Œ¾‚ğÄ¶ (”­Œ¾ƒLƒ…[‚É”­Œ¾‚ğ’Ç‰Á)
  speechSynthesis.speak(uttr);
}

function outputInEng(str){
   var txt = document.getElementById("out");
   txt.value = "It's "+str+".";
   const uttr = new SpeechSynthesisUtterance(txt.value);
   uttr.lang = "en-US";
  // ”­Œ¾‚ğÄ¶ (”­Œ¾ƒLƒ…[‚É”­Œ¾‚ğ’Ç‰Á)
  speechSynthesis.speak(uttr);
}



</script>

</html>
